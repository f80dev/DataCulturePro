Version: 1.0
#Liste des champs disponibles
#"profil_id", "profil_genre","profil_nom", "profil_prenom", "profil_formation", "profil_cursus","profil_promotion","profil_code_postal", "profil_ville",
#        "film_id","film_titre", "film_catégorie", "film_genre","film_annee","film_budget","film_production",
#         "film_festival","film_award_id","film_récompense","film_année",
#        "work_id", "work_job","work_comment","work_validate","work_source","work_state"


#liste des templates : voir https://plotly.com/python/templates/
#simple_white, seaborn, ggplot2, plotly_dark

#Documentation de la librairie graphique
#camembert : https://plotly.com/python-api-reference/generated/plotly.express.pie.html



Reports:
  - title: Répartition des étudiants par formation
    url: https://datastudio.google.com/s/rcrmbRNDsq8
    desc:
    prod: True

  - title: Répartition des étudiants par zone géographique
    url: building
    desc: en chantier
    prod: True


Instant_reports:
  - title: Liste des métiers les plus exercés par les anciens étudiants
    description:
    id: job_by_formation
    chart: pie
    x: Job
    y: nb
    filter: Formation
    color: Job
    sql: SELECT work_job as 'Job', count(work_id) as nb,profil_formation as 'Formation' FROM df WHERE profil_cursus='S' GROUP BY work_job ORDER BY -nb LIMIT 20
    prod: True


  - title: Liste des métiers les plus exercés par les stagiaires
    description:
    id: job_by_formation
    chart: pie
    x: Job
    y: nb
    filter: Formation
    color: Job
    sql: SELECT work_job as 'Job', count(work_id) as nb,profil_formation as 'Formation' FROM df WHERE profil_cursus='P' GROUP BY work_job ORDER BY -nb LIMIT 20
    prod: True

  - title: Les événements qui recompensent le plus les anciens de la FEMIS
    id: film_by_festival
    chart: pie
    template: "plotly_dark"
    x: Evenements
    y: Films
    sql: SELECT * FROM (SELECT film_festival AS Evenements,count(film_id) AS Films FROM df WHERE NOT Evenements='null' GROUP BY Evenements) ORDER BY -Films LIMIT 15
    prod: True


  - title: Répartition des etudiants (formation initiale) par département
    description:
    id: student_by_depyear
    chart: bar
    x: promotion
    y: etudiants
    color: formation
    cols: id,formation,cursus,promotion
    filter: formation
    table: profil
    data_cols: id,department,cursus,degree_year
    sql: SELECT formation, promotion,count(id) as etudiants FROM df WHERE cursus='S' GROUP BY formation,promotion
    prod: True

  - title: Dates de dernière mise a jour des profils
    description: Indicateur d'obsolescence de la base des profils
    id: student_by_lastmodification
    table: profil
    data_cols: cursus,dtLastSearch,id
    cols: cursus,last_search,id
    sql: SELECT cursus, DATE(last_search) AS lastsearch,count(id) as n_profils FROM df GROUP BY cursus,lastsearch
    chart: bar
    x: lastsearch
    y: n_profils
    color: cursus
    replace:
      P: Formation pro
      S: Formation initiale
    prod: True

  - title: Dates de réfencement des oeuvres
    description: Indicateur d'obsolescence de la base des films
    id: pow_by_lastcreate
    table: PieceOfWork
    data_cols: dtLastSearch,id
    cols: dt_lastsearch,id
    sql: SELECT DATE(dt_lastsearch) AS 'Dernière mise a jour',count(id) as n_pow FROM df GROUP BY 'Dernière mise a jour'
    chart: bar
    x: Dernière mise a jour
    y: n_pow
    prod: True

  - title: Etudiants par type de cursus
    description:
    id: student_by_cursus
    chart: bar
    x: promotion
    y: etudiants
    color: cursus
    cols: id,cursus,promotion
    table: profil
    data_cols: id,cursus,degree_year
    sql: SELECT cursus,promotion,count(id) as etudiants FROM df GROUP BY cursus,promotion
    template: simple_white
    replace:
      P: Formation pro
      S: Formation initiale
    prod: True

  - title: Liste des prix gagnés par les films de la FEMIS
    description:
    id: award_by_film
    chart: none
    x: award
    y: nb
    color: description
    cols: id,description
    table: Award
    data_cols: id,description
    sql: SELECT description,count(id) as nb FROM df GROUP BY description ORDER BY nb
    prod: True


  - title: Répartition des stagiaires de la formation profesionnelle
    description:
    id: prostudent_by_depyear
    x: promotion
    y: stagiaires
    chart: aera
    color: formation
    filter: formation
    table: profil
    data_cols: id,department,cursus,degree_year
    cols: id,formation,cursus,promotion
    sql: SELECT formation, promotion,count(id) as stagiaires FROM df WHERE cursus='P' GROUP BY formation,promotion
    prod: True


  - title: Répartition des anciens (pro et initiale) par domaine
    description:
    id: prostudent_by_categories
    x: promotion
    y: profils
    chart: bar
    color: formation
    table: profil
    data_cols: id,department_category,cursus,degree_year
    cols: id,formation,cursus,promotion
    sql: SELECT formation, promotion,count(id) as profils FROM df GROUP BY formation,promotion
    prod: True


  - title: Films par categorie par departement
    description:
    id: student_by_category
    chart: bar
    x: film_catégorie
    y: films
    color: profil_formation
    sql: SELECT profil_formation,film_catégorie,count(film_id) AS films FROM df WHERE profil_cursus='S' GROUP BY profil_formation,film_catégorie
    cols: profil_formation,film_catégorie,film_id,profil_cursus
    prod: False


  - title: 15 premières villes de naissance des étudiants
    id: student_by_depyear
    chart: pie
    y: etudiants
    x: ville
    table: profil
    color: ville
    sql: SELECT * FROM (SELECT ville,count(id) AS etudiants FROM df WHERE cursus='S' AND promotion>=2000 GROUP BY ville) ORDER BY etudiants DESC LIMIT 15
    cols: ville,promotion,id,cursus
    data_cols: town,degree_year,id,cursus
    prod: False


  - title: Répartition du genre par département depuis 2000
    id: student_genre
    chart: pie
    x: profil_formation
    y: etudiants
    color: profil_genre
    sql: SELECT profil_formation,profil_genre,count(profil_id) AS etudiants FROM df WHERE profil_cursus='S' AND profil_promotion>=2000 GROUP BY profil_formation,profil_genre
    cols: profil_formation,profil_genre,profil_id,profil_cursus,profil_promotion
    prod: False


  - title: Type de réalisation par département
    id: film_category_by_department
    chart: pie
    x: profil_formation
    y: réalisations
    color: film_catégorie
    sql: SELECT profil_formation,film_catégorie,count(work_id) AS réalisations FROM df WHERE profil_cursus='S' AND profil_promotion>=2000 GROUP BY profil_formation,film_catégorie
    cols: profil_formation,film_catégorie,work_id,profil_cursus,profil_promotion
    prod: False


  - title: Nombre de production par promotion depuis 2000
    id: student_prod_by_promo
    chart: bar
    x: profil_promotion
    y: réalisations
    filter: Formation
    color: film_catégorie
    sql: SELECT profil_promotion,film_catégorie,count(film_id) AS réalisations,profil_formation AS 'Formation' FROM df WHERE profil_cursus='S' AND profil_promotion>=2000 GROUP BY profil_promotion,film_catégorie
    prod: True



  - title: Nombre d'oeuvres par genre et categorie
    id: pow_by_category
    chart: bar
    x: catégorie
    y: productions
    color: nature
    table: pieceofwork
    sql: SELECT category AS catégorie,nature,count(id) AS productions FROM df GROUP BY category,nature
    cols: catégorie,naturee,id
    data_cols: category,nature,id
    prod: True


  - title: Films par années et par département
    id: film_by_year_dep
    chart: bar
    cols: film_annee,profil_formation,film_id
    group_by: film_annee,profil_formation
    row: profil_formation
    filter: film_annee>2000
    col: film_annee
    color: profil_formation
    val: film_id
    fun: count
    prod: False



